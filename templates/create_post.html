{% extends "parent.html" %}
{% block header %}
{% endblock %}
{% block title %} Create Post {% endblock %}
{% block content %}
<script src=http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js></script>
<script type = "text/javascript">
    $(document).ready(function() {
        var max      = 10; //maximum input boxes allowed
        var container         = $(".exercises_wrap");
        var exercise      = $(".add_exercise"); //Plus sign id
        var time_exercise = $(".time_exercise");

        var x = 0; //input field count intially
        $(exercise).click(function(e){         e.preventDefault();
            if(x < max){ //maximum number of input field allowed
                x++; //input field increment
                $(container).append('<div class = "pure-u-1"><input type="text" name="text[]" placeholder = "Enter in exercise required"/> <input type="number" name="text[]" placeholder = "Enter in # of sets" required/> <input type="number" name="text[]" placeholder = "Enter in # of reps" required/> <a href="#" class="delete_exercise">delete</a></div>'); //adding new input field
            }
        });
        $(time_exercise).click(function(e){         e.preventDefault();
            if(x < max){ //maximum number of input field allowed
                x++; //input field increment
                $(container).append('<div class = "pure-u-1"><input type="text" name="text[]" placeholder = "Add timed exercise required"/> <input type="number" name="text[]" placeholder = "Enter in time spent"/><select name="text[]" id="time" required><option value="seconds">Seconds</option><option value="Minutes">Minutes</option><option value="hours">Hours</option></select><a href="#" class="delete_time_exercise">delete</a></div>'); //adding new input field
            }
        });

        $(container).on("click",".delete_exercise", function(e){ //user click on remove text
            e.preventDefault(); $(this).parent('div').remove(); x--;
        })
        $(container).on("click",".delete_time_exercise", function(e){ //user click on remove text
            e.preventDefault(); $(this).parent('div').remove(); x--;
        })
    });

    var loadFile = function(event) {
        var image = document.getElementById('output');
        image.src = URL.createObjectURL(event.target.files[0]);
        // var input_image = document.getElementById('input_img').style.display = "none";
    };

    </script>
    <body>
        <div id="create_body">
            <h1 class = "pure-menu-heading ">Create your Gymstagram post!</h1>
            <form class="pure-form pure-form-aligned" method="post" enctype="multipart/form-data" action="{{url_for("upload_post")}}" id = "post_form">
              <fieldset>
                <p><img id="output" width="500"/></p>
                <input type="file" id="input_img" name="image" onchange="loadFile(event)" style="display: inline;" accept="image/jpeg,image/png,image/gif" required/>
                <br><br>
                  <textarea name = "text" rows = "5" cols = "50" placeholder="Write a caption..." required></textarea>
                  <br><br>

                  <div class = "exercises_wrap">
                    <div class = "pure-u-1"><input type="text" name="text[]" placeholder = "Enter in exercise" required/> <input type="number" name="text[]" placeholder = "Enter in # of sets" required/> <input type="number" name="text[]" placeholder = "Enter in # of reps" required/> <a href="#" class="delete_exercise">delete</a></div>
                    <div class = "pure-u-1"><input type="text" name="text[]" placeholder = "Add timed exercise" required/> <input type="number" name="text[]" placeholder = "Enter in time spent" required/><select name="text[]" id="time"><option value="seconds">Seconds</option><option value="Minutes">Minutes</option><option value="hours">Hours</option></select><a href="#" class="delete_time_exercise">delete</a></div>
                    <div> <button class="add_exercise pure-button">Add Sets/Reps Exercise</button></div>
                    <div> <button class="time_exercise pure-button">Add Timed Exercise</button></div>
                  </div>
                  <button type="submit" class="pure-button pure-button-primary">Submit</button>
              </fieldset>
            </form>
        </div>
      </body>
{% endblock %}